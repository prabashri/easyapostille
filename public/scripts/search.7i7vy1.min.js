(() => {
"use strict";(()=>{var I=Object.create;var x=Object.defineProperty;var N=Object.getOwnPropertyDescriptor;var D=Object.getOwnPropertyNames;var H=Object.getPrototypeOf,B=Object.prototype.hasOwnProperty;var F=(e,t,a,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of D(t))!B.call(e,o)&&o!==a&&x(e,o,{get:()=>t[o],enumerable:!(s=N(t,o))||s.enumerable});return e};var P=(e,t,a)=>(a=e!=null?I(H(e)):{},F(t||!e||!e.__esModule?x(a,"default",{value:e,enumerable:!0}):a,e));let k=null,T=null;async function R(){if(k)return{fuse:k,data:T};window.Fuse||await import("/vendor/fuse.min.js?v=7.1.0");try{const e=document.currentScript||[...document.querySelectorAll('script[type="module"]')].find(s=>s.dataset.searchIndex);if(!e)throw new Error("No <script> with data-search-index found.");const t=e.dataset.searchIndex;if(!t)throw new Error("Missing data-search-index attribute.");const a=await fetch(t,{cache:"no-cache"});if(!a.ok)throw new Error(`HTTP ${a.status}`);return T=await a.json(),k=new Fuse(T,{keys:["title","description","content","tags"],threshold:.2,ignoreLocation:!0,includeMatches:!0,minMatchCharLength:2,useExtendedSearch:!0}),{fuse:k,data:T}}catch(e){return console.error("\u274C Failed to initialize search index:",e),{fuse:null,data:[]}}}function S(e,t=[]){const a=document.createDocumentFragment();let s=0;for(const[o,r]of t){o>s&&a.appendChild(document.createTextNode(e.slice(s,o)));const c=document.createElement("mark");c.textContent=e.slice(o,r+1),a.appendChild(c),s=r+1}return s<e.length&&a.appendChild(document.createTextNode(e.slice(s))),a}function M(e,t){const a=t.toLowerCase(),o=e.toLowerCase().indexOf(a);if(o===-1)return null;const r=e.split(/\s+/);let c=0,g=0;for(let i=0;i<r.length;i++)if(g+=r[i].length+1,g>o){c=i;break}const l=3,m=r.slice(Math.max(0,c-l),c).join(" "),p=r[c]||t,E=r.slice(c+1,c+1+l).join(" "),n=document.createElement("span");n.className="result-snippet",n.textContent=`... ${m} `;const d=document.createElement("mark");return d.textContent=p,n.appendChild(d),n.append(` ${E} ...`),n}function j(e){const t=document.getElementById("search-modal"),a=t==null?void 0:t.querySelector(".search-modal-content"),s=document.getElementById("search-modal-input"),o=document.getElementById("global-search-button"),r=document.getElementById("close-search-modal"),c=document.getElementById("search-modal-results");if(!t||!s||!c||!o||!a)return;let g=()=>{};function l(n){function d(i){if(i.key!=="Tab")return;const h=n.querySelectorAll('a[href], button:not([disabled]), input, textarea, select, [tabindex]:not([tabindex="-1"])');if(!h.length)return;const u=h[0],C=h[h.length-1];i.shiftKey&&document.activeElement===u?(i.preventDefault(),C.focus()):!i.shiftKey&&document.activeElement===C&&(i.preventDefault(),u.focus())}return n.addEventListener("keydown",d),()=>n.removeEventListener("keydown",d)}function m(n){var i,h;if(c.innerHTML="",!e||n.length<2)return;const d=e.search(n);if(!d.length){c.innerHTML="<li>No results found</li>";return}for(const{item:u,matches:C}of d.slice(0,10)){const y=document.createElement("li"),f=document.createElement("a");f.href=u.url;const w=Object.fromEntries(C.map(L=>[L.key,L])),v=document.createElement("span");v.className="result-title";const b=(i=w.title)==null?void 0:i.indices;if(b!=null&&b.length?v.appendChild(S(u.title,b)):v.textContent=u.title,f.appendChild(v),f.appendChild(document.createElement("br")),(h=w.content)!=null&&h.value){const L=M(u.content,n);L&&f.appendChild(L)}y.appendChild(f),c.appendChild(y)}}function p(){console.log("Opening search modal"),t.classList.remove("display-none"),t.setAttribute("aria-hidden","false"),s.focus(),g=l(a)}function E(){console.log("Closing search modal"),s.blur(),t.classList.add("display-none"),t.setAttribute("aria-hidden","true"),console.log("modal attribute:",t.classList.contains("display-none")),s.value="",c.innerHTML="",g(),setTimeout(()=>o.focus(),50)}o==null||o.addEventListener("click",n=>{n.preventDefault(),p()}),r==null||r.addEventListener("click",n=>{n.preventDefault(),E()}),document.addEventListener("mousedown",n=>{!t.classList.contains("display-none")&&!a.contains(n.target)&&E()}),document.addEventListener("keydown",n=>{n.key==="Escape"&&!t.classList.contains("display-none")&&(n.preventDefault(),E()),(n.metaKey||n.ctrlKey)&&n.key.toLowerCase()==="k"&&(n.preventDefault(),p())}),s.addEventListener("input",()=>m(s.value.trim()))}function A(e){const t=document.getElementById("search-input"),a=document.getElementById("search-results");if(!t||!a)return;const o=new URLSearchParams(window.location.search).get("q")||"";let r;function c(l,m){var E,n;if(a.innerHTML="",!l||l.length===0){a.innerHTML=`<p>No results found for <strong>"${m}"</strong>.</p>`;return}const p=document.createElement("ul");p.className="search-results";for(const{item:d,matches:i}of l.slice(0,20)){const h=document.createElement("li"),u=document.createElement("a");u.href=d.url;const C=Object.fromEntries(i.map(w=>[w.key,w])),y=document.createElement("span");y.className="result-title";const f=(E=C.title)==null?void 0:E.indices;if(f!=null&&f.length?y.appendChild(S(d.title,f)):y.textContent=d.title,u.appendChild(y),u.appendChild(document.createElement("br")),(n=C.content)!=null&&n.value){const w=M(d.content||d.description||"",m);w&&u.appendChild(w)}h.appendChild(u),p.appendChild(h)}a.appendChild(p)}function g(l){if(!e||l.length<2){a.innerHTML="";return}const m=e.search(l);c(m,l)}t.addEventListener("input",l=>{const m=l.target.value.trim();clearTimeout(r),r=setTimeout(()=>{g(m);const p=new URL(window.location.href);m?p.searchParams.set("q",m):p.searchParams.delete("q"),window.history.replaceState({},"",p.toString())},250)}),o&&(t.value=o,g(o))}(async()=>{const{fuse:e}=await R();e&&(j(e),A(e))})();})();
})();
