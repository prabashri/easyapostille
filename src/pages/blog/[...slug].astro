---
// src/pages/blog/[slug].astro
import { getEntry, render } from 'astro:content';
import BlogPost from '../../layouts/BlogPost.astro';

const { slug } = Astro.params;

// ðŸ’¡ Use string check in case of dynamic routing edge cases
if (typeof slug !== 'string') {
  throw new Error(`Invalid slug: ${slug}`);
}

// âœ… Fetch entry by ID (file name without extension)
const post = await getEntry('blog', slug);

if (!post) {
  throw new Error(`Post not found for slug: ${slug}`);
}

// âœ… Render content with render(entry)
const { Content } = await render(post);
---

<BlogPost {...post.data} >
  <Content />
</BlogPost>
