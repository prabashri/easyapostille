---
import { siteDefaults } from '../config/siteDefaults';
import { siteFunctions } from '../config/siteFunctions';
import modifiedDates from '../data/modified-dates.json';
import BaseLayout from '../layouts/BaseLayout.astro';
import type { HeadProps } from '../types/HeadProps';

// Get last modified date for privacy-policy
const updatedAt =
  modifiedDates['privacy-policy']
    ? new Date(modifiedDates['privacy-policy']).toLocaleDateString('en-US', {
        year: 'numeric',
        month: 'long',
        day: 'numeric'
      })
    : siteDefaults.publishedDate;

// Dynamic HeadProps
const pageSeo: HeadProps = {
  title: `Privacy Policy`,
  description: `Learn how ${siteDefaults.siteName} handles your data, cookies, and privacy.`,
  image: '/images/astro-theme-nviewsweb-main.png',
  type: 'website', // âœ… Now valid for Privacy Policy
  url: `${siteDefaults.siteUrl}/privacy-policy`,
  canonicalUrl: `${siteDefaults.siteUrl}/privacy-policy`,
  siteName: siteDefaults.siteName,
  authors: [
    {
      id: 'prabakaran-shankar',
      slug: 'prabakaran-shankar',
      url: siteDefaults.authorUrl,
      name: siteDefaults.authorName,
      data: {}
    }
  ],
  publishedAt: siteDefaults.publishedDate,
  updatedAt,
  index: true,
  keywords: [...siteDefaults.keywords, 'Privacy Policy'],
  showBreadcrumb: true
};
---

<BaseLayout headProps={pageSeo}>
  <Fragment slot="headContent-top"></Fragment>
  <Fragment slot="headContent-bottom"></Fragment>

  <article class="prose mi-auto">
    <header class="flex flex-col ai-center mb-1 mi-auto bg-secondary-lighter-x col-base-00 mn-h-230 jc-center">
      <h1 class="mx-w-site mi-auto pb-05 mb-05">{pageSeo.title}</h1>
      <p class="mx-w-site mi-auto text-xl">{pageSeo.description}</p>
    </header>

    <div class="mx-w-content p-1 mi-auto">
      <hr>
      <p><strong>Effective date:</strong> {pageSeo.updatedAt}</p>

      <p>{siteDefaults.siteName} ({siteDefaults.siteUrl}) values your privacy. This Privacy Policy explains how we collect, use, and safeguard your information when you use our website.</p>

      <h2>1. Information We Collect</h2>
      <p>We do <strong>not</strong> collect personal data like your name or email unless you voluntarily submit it via our contact form. However, we may collect:</p>
      <ul>
        <li><strong>Cookies</strong> for serving ads and improving performance</li>
        {siteFunctions.analyticsId && (
          <li><strong>Analytics tracking</strong> (via Google Analytics ID: {siteFunctions.analyticsId})</li>
        )}
        <li><strong>Contact form inputs</strong> submitted voluntarily</li>
        <li><strong>IP address and browser information</strong> for security and analytics</li>
      </ul>

      <h2>2. How We Collect Information</h2>
      <ul>
        <li>Through <strong>cookies</strong>, analytics, and browser interactions when you visit our site</li>
        <li>Through <strong>contact forms</strong>, where you submit your details voluntarily</li>
      </ul>

      <h2>3. Third-Party Services</h2>
      <p>We rely on third-party services that may collect or process data under their own policies:</p>
      <ul>
        {siteFunctions.analyticsId && (
          <li><strong>Google Analytics</strong> - Visitor analytics tracking</li>
        )}
        <li><strong>Cloudflare</strong> - CDN, performance, and security</li>
        <li><strong>Hosting</strong> - {siteDefaults.domainName} hosting via Cloudflare Pages</li>
        <li><strong>Email Services</strong> - ({siteDefaults.socialLinks.email}) for communication</li>
        <li><strong>GitHub</strong> - Source code and deployment</li>
      </ul>

      <h2>4. Use of Information</h2>
      <ul>
        <li>To respond to <strong>contact form submissions</strong></li>
        <li>To improve site performance and functionality</li>
        <li>To serve relevant ads (if enabled)</li>
      </ul>

      <h2>5. Data Sharing</h2>
      <p>We do <strong>not</strong> sell or share your personal information. Data is used strictly for operational purposes.</p>

      <h2>6. Data Storage & Security</h2>
      <p>We do <strong>not</strong> store personal data on our servers. Data may be processed by trusted third-party services for operational purposes.</p>

      <h2>7. Cookies & Tracking</h2>
      <p>Cookies may be used for:</p>
      <ul>
        <li>Analytics tracking</li>
        <li>Advertising personalization</li>
        <li>Performance optimization</li>
        <li>User preference storage</li>
      </ul>

      <h2>8. Opting Out</h2>
      <p>You may disable cookies through your browser settings. Refer to your browser documentation for managing cookies.</p>

      <h2>9. Contact Form Submissions</h2>
      <p>When you contact us, we collect:</p>
      <ul>
        <li>Your <strong>name</strong> and <strong>email</strong></li>
        <li>Your <strong>message content</strong></li>
      </ul>
      <p>This data is only used to respond to your inquiry. We do not store personal information permanently.</p>

      <h2>10. Contact</h2>
      <p>For privacy-related inquiries, contact us:</p>
      <p>ðŸ“§ <a href={`mailto:${siteDefaults.adminEmail}`}><strong>{siteDefaults.adminEmail}</strong></a></p>

      <h2>11. Data Deletion</h2>
      <p>As we do not store personal information, there is no data to delete. However, you may request confirmation by contacting us.</p>

      <h2>12. Children's Privacy</h2>
      <p>This website is intended for users <strong>13 years and older</strong>. We do not knowingly collect data from children under 13.</p>
    </div>
  </article>

  <Fragment slot="extraScripts"></Fragment>
</BaseLayout>
